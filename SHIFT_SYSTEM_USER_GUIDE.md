# ๐ฏ ูุธุงู ุงูุดููุชุงุช ุงููุงูู - ุฏููู ุงููุณุชุฎุฏู ุงูููุงุฆู

## ๐ ุฌุฏูู ุงููุญุชููุงุช
1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ุงูุตูุญุงุช ุงููุชุงุญุฉ](#ุงูุตูุญุงุช-ุงููุชุงุญุฉ)
3. [ุณูุฑ ุงูุนูู ุงููุงูู](#ุณูุฑ-ุงูุนูู-ุงููุงูู)
4. [ุญุณุงุจ ุงูุฑูุงุชุจ ุงูุชููุงุฆู](#ุญุณุงุจ-ุงูุฑูุงุชุจ-ุงูุชููุงุฆู)
5. [ุงููุซุงุฆู ุงูุชูุตูููุฉ](#ุงููุซุงุฆู-ุงูุชูุตูููุฉ)

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

### ูุง ูู ุงููุธุงูุ
ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุงูุดููุชุงุช ูุงูุญุถูุฑ ูุญุณุงุจ ุงูุฑูุงุชุจ ุชููุงุฆูุงู ุจูุงุกู ุนูู:
- โ ุฌุฏุงูู ุดููุชุงุช ุฃุณุจูุนูุฉ ูุฑูุฉ (ูู ููู ูู ุดููุช ูุฎุชูู)
- โ ูุดู ุงูุชุฃุฎูุฑ ุชููุงุฆูุงู ูุน ูุชุฑุฉ ุณูุงุญ 15 ุฏูููุฉ
- โ ุญุณุงุจ ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ ูุน ูุชุฑุฉ ุณูุงุญ 30 ุฏูููุฉ
- โ ุญุณุงุจ ุงูุฑุงุชุจ ุชููุงุฆูุงู ุจูุงุกู ุนูู ุงูุณุงุนุงุช ุงููุนููุฉ
- โ ูุฑุงูุจุฉ ุญูุฉ ูุญุถูุฑ ุงูููุธููู ูู ุงูููุช ุงููุนูู

### ุงูููููุงุช ุงูุฑุฆูุณูุฉ:
1. **Backend (Django):** 32 API endpoint
2. **Frontend (Next.js):** ุตูุญุชูู ุฑุฆูุณูุชูู
3. **Database:** 3 ุฌุฏุงูู ุฌุฏูุฏุฉ
4. **Signals:** ุญุณุงุจ ุชููุงุฆู ููุฑูุงุชุจ

---

## ๐ฑ ุงูุตูุญุงุช ุงููุชุงุญุฉ

### 1. **ุฅุฏุงุฑุฉ ุฌุฏุงูู ุงูุฏูุงู** (`/dashboard/shifts/schedules`)
**ูู ูุณุชุฎุฏููุง:** ุงููุฏูุฑูู ูุงูุฅุฏุงุฑููู

**ุงููููุฒุงุช:**
- ๐ ุงุฎุชูุงุฑ ููุธู ูู ุงููุงุฆูุฉ
- ๐ ุชุญุฏูุฏ ุดููุช ูุฎุชูู ููู ููู (ุงูุฃุญุฏ โ ุงูุณุจุช)
- โฐ ุชุญุฏูุฏ ููุช ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ููู ููู
- โ ุชูุนูู/ุฅูุบุงุก ุฃูุงู ุงูุนูู
- ๐ ุญุณุงุจ ุชููุงุฆู ูุฅุฌูุงูู ุงูุณุงุนุงุช ุงูุฃุณุจูุนูุฉ
- โก ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ: ุชุทุจูู ููุณ ุงูููุช ุนูู ุฌููุน ุงูุฃูุงู
- ๐พ ุญูุธ ุงูุฌุฏูู ูุงููุงู ุฏูุนุฉ ูุงุญุฏุฉ

**ููููุฉ ุงูุงุณุชุฎุฏุงู:**
```
1. ุงูุชุญ http://localhost:3000/dashboard/shifts/schedules
2. ุงุฎุชุฑ ุงูููุธู ูู ุงููุงุฆูุฉ
3. ุญุฏุฏ ุฃูุงู ุงูุนูู (ุถุน โ ุนูู ูู ููู)
4. ุญุฏุฏ ููุช ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ููู ููู
5. ุฑุงุฌุน ุงูููุฎุต (ุนุฏุฏ ุงูุฃูุงู ูุฅุฌูุงูู ุงูุณุงุนุงุช)
6. ุงุถุบุท "ุญูุธ ุงูุฌุฏูู"
```

**ูุซุงู:**
```
ุงูููุธู: ุฃุญูุฏ ูุญูุฏ
ุงูุฃุญุฏ: 9:00 AM - 5:00 PM (8 ุณุงุนุงุช)
ุงูุฅุซููู: 9:00 AM - 5:00 PM (8 ุณุงุนุงุช)
ุงูุซูุงุซุงุก: 9:00 AM - 5:00 PM (8 ุณุงุนุงุช)
ุงูุฃุฑุจุนุงุก: 9:00 AM - 5:00 PM (8 ุณุงุนุงุช)
ุงูุฎููุณ: 9:00 AM - 1:00 PM (4 ุณุงุนุงุช)
ุงูุฌูุนุฉ: ุฅุฌุงุฒุฉ
ุงูุณุจุช: 6:00 AM - 10:00 AM (4 ุณุงุนุงุช)

ุฅุฌูุงูู: 40 ุณุงุนุฉ ุฃุณุจูุนูุงู
```

---

### 2. **ูุฑุงูุจุฉ ุงูุฏูุงู ุงูุญูุฉ** (`/dashboard/shifts/monitor`)
**ูู ูุณุชุฎุฏููุง:** ุงููุฏูุฑูู ูุงูุฅุฏุงุฑููู

**ุงููููุฒุงุช:**
- ๐๏ธ ุนุฑุถ ุญุงูุฉ ุฌููุน ุงูููุธููู ูู ุงูููุช ุงููุนูู
- ๐ ุชุญุฏูุซ ุชููุงุฆู ูู 30 ุซุงููุฉ
- ๐ ุฅุญุตุงุฆูุงุช ููุฑูุฉ:
  - ุนุฏุฏ ุงูููุธููู ุนูู ุงูุดููุช
  - ุนุฏุฏ ุงูุญุงุถุฑูู
  - ุนุฏุฏ ุงููุชุฃุฎุฑูู
  - ุนุฏุฏ ุงูุฐูู ูู ูุณุฌููุง ุญุถูุฑ
- ๐จ ุฃููุงู ูููุฒุฉ:
  - ุฃุฎุถุฑ: ุญุงุถุฑ ูู ุงูููุช
  - ุฃุตูุฑ: ูุชุฃุฎุฑ
  - ุจุฑุชูุงูู: ูู ูุณุฌู ุญุถูุฑ ุจุนุฏ
- โฑ๏ธ ุนุฑุถ ุฏูุงุฆู ุงูุชุฃุฎูุฑ
- ๐ ุนุฑุถ ููุช ุชุณุฌูู ุงูุญุถูุฑ

**ููููุฉ ุงูุงุณุชุฎุฏุงู:**
```
1. ุงูุชุญ http://localhost:3000/dashboard/shifts/monitor
2. ุดุงูุฏ ูุงุฆูุฉ ุงูููุธููู ุงูุญุงููุฉ
3. ุงูุตูุญุฉ ุชุชุญุฏุซ ุชููุงุฆูุงู ูู 30 ุซุงููุฉ
4. ููููู ุงูุถุบุท ุนูู "ุชุญุฏูุซ" ููุชุญุฏูุซ ุงููุฏูู
```

---

## ๐ ุณูุฑ ุงูุนูู ุงููุงูู

### **ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ ุงูุฌุฏุงูู**
```
ุงููุฏูุฑ โ /dashboard/shifts/schedules
- ูุฎุชุงุฑ ุงูููุธู
- ูุญุฏุฏ ุดููุช ูู ููู
- ูุญูุธ ุงูุฌุฏูู
โ ุงูุฌุฏูู ูุญููุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

### **ุงูุฎุทูุฉ 2: ุงูููุธู ูุณุฌู ุญุถูุฑ**
```
ุงูููุธู โ ููุชุญ ุงูุชุทุจูู
- ูุถุบุท "ุชุณุฌูู ุญุถูุฑ"
- API: POST /hr/attendance/checkin/{employee_id}/

ุงููุธุงู ููุญุต:
1. ูุฌูุจ ุงูุดููุช ุงููุญุฏุฏ ููููู ุงูุญุงูู
2. ููุงุฑู ุงูููุช ุงูุญุงูู ุจููุช ุงูุจุฏุงูุฉ ุงููุชููุน
3. ูุชุฑุฉ ุงูุณูุงุญ: 15 ุฏูููุฉ
   - ุฅุฐุง ุญุถุฑ ูุจู 6:15 AM (ููุดููุช 6:00 AM) โ present โ
   - ุฅุฐุง ุญุถุฑ ุจุนุฏ 6:15 AM โ late โ๏ธ + ุนุฏุฏ ุฏูุงุฆู ุงูุชุฃุฎูุฑ

โ ุงูุญุถูุฑ ูุณุฌู ูู EmployeeAttendance
โ WorkShift ุฌุฏูุฏ ุชู ุฅูุดุงุคู
```

### **ุงูุฎุทูุฉ 3: ุงููุฑุงูุจุฉ ุงูุญูุฉ**
```
ุงููุฏูุฑ โ /dashboard/shifts/monitor

ูุดุงูุฏ:
- ุฃุญูุฏ ูุญูุฏ: late (20 ุฏูููุฉ ุชุฃุฎูุฑ) โ๏ธ
- ุณุงุฑุฉ ุนูู: present โ
- ูุญูุฏ ุญุณู: ูู ูุณุฌู ุญุถูุฑ ุจุนุฏ ๐ด

ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู 30 ุซุงููุฉ
```

### **ุงูุฎุทูุฉ 4: ุงูููุธู ูุณุฌู ุงูุตุฑุงู**
```
ุงูููุธู โ ูุถุบุท "ุชุณุฌูู ุงูุตุฑุงู"
- API: POST /hr/attendance/checkout/{employee_id}/

ุงููุธุงู ูุญุณุจ:
1. ุฅุฌูุงูู ุงูุณุงุนุงุช ุงููุนููุฉ
2. ุฎุตู ููุช ุงูุงุณุชุฑุงุญุฉ (ุณุงุนุฉ ููุดููุชุงุช >6 ุณุงุนุงุช)
3. ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ (ูุชุฑุฉ ุณูุงุญ 30 ุฏูููุฉ)

ูุซุงู:
- ุงูุดููุช: 6:00 AM - 10:00 AM (4 ุณุงุนุงุช)
- ุงูุญุถูุฑ: 8:29 AM
- ุงูุงูุตุฑุงู: 10:30 AM
- ุงูุณุงุนุงุช ุงููุนููุฉ: 2.02 ุณุงุนุฉ
- ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ: 0 (ูู ูุชุฌุงูุฒ 10:30 AM)

โ WorkShift.check_out ูุญุฏุซ
โ EmployeeAttendance.check_out ูุญุฏุซ
```

### **ุงูุฎุทูุฉ 5: ุญุณุงุจ ุงูุฑุงุชุจ ุงูุชููุงุฆู**
```
๐ค Signal ูุดุชุบู ุชููุงุฆูุงู ุนูุฏ ุญูุธ check_out

ุงูุญุณุงุจุงุช:
1. ุงูุฑุงุชุจ ุงูุดูุฑู: 6000 ุฌููู
2. ุฑุงุชุจ ุงูุณุงุนุฉ: (6000 / 30) / 8 = 25 ุฌููู/ุณุงุนุฉ
3. ุงูุณุงุนุงุช ุงููุนููุฉ: 2.02 ุณุงุนุฉ
4. ุงูุฑุงุชุจ: 25 ร 2.02 = 50.50 ุฌููู

โ ูุถุงู 50.50 ุฌููู ูู MainWallet
โ MultiWalletTransaction ูุณุฌูุฉ
โ ูุธูุฑ ูู ุงูุฑุตูุฏ ููุฑุงู
```

### **ุงูุฎุทูุฉ 6: ุงูููุธู ููุญุต ุฑุตูุฏู**
```
ุงูููุธู โ Dashboard
- API: GET /hr/employee-dashboard-stats/

Response:
{
  "attendance_today": {
    "status": "late",
    "late_minutes": 149,
    "checked_in": "08:29",
    "checked_out": "10:30"
  },
  "wallet_data": {
    "main_balance": "175.50",  โ ุฒุงุฏ 50.50 ุฌููู!
    "total_balance": "175.50"
  }
}

โ ุงูููุธู ูุฑู ุฑุตูุฏู ุงููุญุฏุซ
```

---

## ๐ฐ ุญุณุงุจ ุงูุฑูุงุชุจ ุงูุชููุงุฆู

### **ููู ูุนููุ**

#### **1. ุนูุฏ Check-out:**
```python
# Signal ูุชู ุชุดุบููู ุชููุงุฆูุงู
@receiver(post_save, sender=WorkShift)
def calculate_shift_salary(sender, instance, **kwargs):
    if instance.check_out:  # โ ุนูุฏ ุญูุธ check_out
        # ูุจุฏุฃ ุงูุญุณุงุจ
```

#### **2. ุงูุฎุทูุงุช:**
```python
# ุฃ. ุฌูุจ ุงูุดููุช ุงููุญุฏุฏ
shift_schedule = WeeklyShiftSchedule.objects.get(
    employee=employee,
    day_of_week=ุงูุณุจุช  # ูุซูุงู
)
scheduled_hours = 4  # ูู 6 AM ุฅูู 10 AM

# ุจ. ุญุณุงุจ ุงูุณุงุนุงุช ุงููุนููุฉ
worked_hours = (check_out - check_in).hours - break_time
# ูุซูุงู: 2.02 ุณุงุนุฉ

# ุฌ. ุญุณุงุจ ุงูุฑุงุชุจ ุงูุฃุณุงุณู
hourly_rate = (monthly_salary / 30) / 8
base_salary = hourly_rate * worked_hours
# 25 ร 2.02 = 50.50 ุฌููู

# ุฏ. ุญุณุงุจ ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ (ุฅู ูุฌุฏุช)
if worked_hours > scheduled_hours:
    overtime = worked_hours - scheduled_hours
    overtime_pay = overtime * (hourly_rate * 1.5)
    total_salary = base_salary + overtime_pay
else:
    total_salary = base_salary

# ูู. ุฅุถุงูุฉ ูููุญูุธุฉ
create_multi_wallet_transaction(
    wallet_type='main',
    amount=total_salary,
    description=f"Shift salary - {date}"
)
```

### **ุฃูุซูุฉ:**

#### **ูุซุงู 1: ููุธู ูุชุฃุฎุฑ**
```
ุงูุฑุงุชุจ ุงูุดูุฑู: 6000 ุฌููู
ุงูุดููุช: 6:00 - 10:00 (4 ุณุงุนุงุช)
ุงูุญุถูุฑ: 8:29 AM
ุงูุงูุตุฑุงู: 10:00 AM
ุงูุณุงุนุงุช ุงููุนููุฉ: 1.52 ุณุงุนุฉ

ุงูุญุณุงุจ:
ุฑุงุชุจ ุงูุณุงุนุฉ = (6000/30)/8 = 25 ุฌููู
ุงูุฑุงุชุจ = 25 ร 1.52 = 38 ุฌููู

ุงููุชูุฌุฉ: 38 ุฌููู โ
(ุฎุตู ุจุณุจุจ ุนุฏู ุฅููุงู ุงูู 4 ุณุงุนุงุช)
```

#### **ูุซุงู 2: ููุธู + ุณุงุนุงุช ุฅุถุงููุฉ**
```
ุงูุฑุงุชุจ ุงูุดูุฑู: 6000 ุฌููู
ุงูุดููุช: 6:00 - 10:00 (4 ุณุงุนุงุช)
ุงูุญุถูุฑ: 6:00 AM
ุงูุงูุตุฑุงู: 11:00 AM
ุงูุณุงุนุงุช ุงููุนููุฉ: 5 ุณุงุนุงุช

ุงูุญุณุงุจ:
ุฑุงุชุจ ุงูุณุงุนุฉ = 25 ุฌููู
ุงูุฑุงุชุจ ุงูุฃุณุงุณู = 25 ร 4 = 100 ุฌููู
ุงูุณุงุนุงุช ุงูุฅุถุงููุฉ = 1 ุณุงุนุฉ
ูุนุฏู ุงูุฅุถุงูู = 25 ร 1.5 = 37.5 ุฌููู
ุฑุงุชุจ ุงูุฅุถุงูู = 37.5 ร 1 = 37.5 ุฌููู

ุงููุชูุฌุฉ: 100 + 37.5 = 137.5 ุฌููู ๐
```

---

## ๐ APIs ุงููุชุงุญุฉ

### **Shift Schedules:**
```bash
# ุฅูุดุงุก ุฌุฏูู ุฃุณุจูุนู ูุงูู
POST /hr/api/shift-schedules/bulk_create/
{
  "employee": "uuid",
  "schedules": [
    {"day_of_week": 6, "start_time": "06:00", "end_time": "10:00"}
  ]
}

# ุฌูุจ ุฌุฏูู ููุธู
GET /hr/api/shift-schedules/employee_schedule/?employee_id=uuid

# ุชุญุฏูุซ ููู ูุนูู
PUT /hr/api/shift-schedules/{id}/

# ุญุฐู ููู
DELETE /hr/api/shift-schedules/{id}/
```

### **Attendance:**
```bash
# ุชุณุฌูู ุญุถูุฑ
POST /hr/attendance/checkin/{employee_id}/
Response: {status: "late", late_minutes: 20}

# ุชุณุฌูู ุงูุตุฑุงู
POST /hr/attendance/checkout/{employee_id}/
Response: {total_hours: 2.02, overtime_minutes: 0}

# ุงูุญุงูุฉ ุงูุญุงููุฉ
GET /hr/api/shift-attendance/current_status/
```

### **Monitoring:**
```bash
# ุญุงูุฉ ุฌููุน ุงูููุธููู ุนูู ุงูุดููุช ุงูุขู
GET /hr/api/shift-attendance/current_status/

# ุชูุฑูุฑ ูููู
GET /hr/api/shift-attendance/daily_report/?date=2025-10-18

# ููุฎุต ุดูุฑู ูููุธู
GET /hr/api/shift-attendance/employee_summary/?employee_id=uuid&month=10&year=2025
```

---

## ๐ ุงููุซุงุฆู ุงูุชูุตูููุฉ

### **ุงููููุงุช ุงููุชุงุญุฉ:**

1. **SHIFT_QUICK_START.md**
   - ุฏููู ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ
   - ุฃูุงูุฑ ุงูุงุฎุชุจุงุฑ
   - Troubleshooting

2. **SHIFT_SYSTEM_COMPLETE.md**
   - ูุธุฑุฉ ุดุงููุฉ ุนูู ุงููุธุงู
   - ุฅุญุตุงุฆูุงุช ูุงููุฉ
   - ุงููููุงุช ุงููุนุฏูุฉ

3. **SHIFT_INTEGRATION_WITH_ATTENDANCE.md**
   - ููู ูุชูุงูู ูุน ูุธุงู ุงูุญุถูุฑ
   - ูุนุงุฏูุงุช ุญุณุงุจ ุงูุชุฃุฎูุฑ
   - ุฃูุซูุฉ ุนูููุฉ

4. **SALARY_CALCULATION_EXPLAINED.md**
   - ุดุฑุญ ุชูุตููู ูุญุณุงุจ ุงูุฑูุงุชุจ
   - Signal flow
   - Test cases

5. **SHIFT_SCHEDULING_DESIGN.md**
   - ุงูุชุตููู ุงูุฃุตูู ูููุธุงู
   - Database schema
   - API specifications

---

## ๐ฏ Quick Reference

### **ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ:**
```bash
# 1. Start servers
python manage.py runserver
cd v0-micro-system && npm run dev

# 2. ุฅูุดุงุก ุฌุฏุงูู
http://localhost:3000/dashboard/shifts/schedules

# 3. ูุฑุงูุจุฉ
http://localhost:3000/dashboard/shifts/monitor
```

### **ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ:**
- โ ุดููุช ูุฎุชูู ููู ููู
- โ ูุดู ุชุฃุฎูุฑ ุชููุงุฆู (15 ุฏูููุฉ ุณูุงุญ)
- โ ุญุณุงุจ ุณุงุนุงุช ุฅุถุงููุฉ (30 ุฏูููุฉ ุณูุงุญ)
- โ ุฑุงุชุจ ุชููุงุฆู ุจูุงุกู ุนูู ุงูุณุงุนุงุช ุงููุนููุฉ
- โ ูุฑุงูุจุฉ ุญูุฉ
- โ ุชุญุฏูุซ ูู 30 ุซุงููุฉ

### **ุงูุฅุญุตุงุฆูุงุช:**
- ๐ **Backend:** 32 API endpoint
- ๐ **Frontend:** ุตูุญุชูู + sidebar integration
- ๐ **Database:** 3 tables ุฌุฏูุฏุฉ
- ๐ **Code:** ~2,000 lines
- ๐ **Docs:** 5 ูููุงุช ุชูุซูู

---

## ๐ ุงูุฏุนู

### **ูุดููุฉ ุดุงุฆุนุฉ: ุงูููุธู ูุชุฃุฎุฑ ููู ูุธูุฑ "present"**
**ุงูุญู:**
1. ุชุฃูุฏ ูู ูุฌูุฏ `WeeklyShiftSchedule` ูุญุฏุฏ
2. ุชุญูู ูู `day_of_week` ุตุญูุญ
3. ุฑุงุฌุน `start_time` ูู ุงูุดููุช

### **ูุดููุฉ: ุงูุฑุงุชุจ ูุง ููุญุณุจ**
**ุงูุญู:**
1. ุชุฃูุฏ ูู `check_out` ูุญููุธ
2. ุชุญูู ูู ูุฌูุฏ `WeeklyShiftSchedule`
3. ุชุฃูุฏ ูู ุงูุณุงุนุงุช > 1 ุณุงุนุฉ

### **ูููุณุงุนุฏุฉ:**
ุฑุงุฌุน `SHIFT_INTEGRATION_WITH_ATTENDANCE.md` ูุณู Debugging

---

**๐ ุงููุธุงู ุฌุงูุฒ ููุนูู ุจููุงุกุฉ!**

ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ: ุฃูุชูุจุฑ 2025
